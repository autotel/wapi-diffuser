{"version":3,"sources":["../../node_modules/browserify/node_modules/browser-pack/_prelude.js","src/blurModule.js","src/index.js"],"names":[],"mappings":"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","file":"build.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","let filterLowestCut=80;\r\nlet filterHighestCut=20000;\r\n\r\nexport class BlurModule{\r\n  constructor(audioContext){\r\n    console.log(\"blurmodule constructor\");\r\n    let thisBlurModule=this;\r\n\r\n    this.biquadFilter = audioContext.createBiquadFilter();\r\n    this.convolver=audioContext.createConvolver();\r\n\r\n    let inputNode=audioContext.createGain();\r\n    let outputNode=audioContext.createGain();\r\n    this.dryLevel=audioContext.createGain();\r\n    this.wetLevel=audioContext.createGain();\r\n    /*\r\n    [input node _______________________]\r\n      V\r\n    [Low pass filte ___________________]\r\n      V                    V\r\n    [dryLevel node]     [wetLevel node]\r\n      |                    V\r\n      |                 [convolver]\r\n      V                    V\r\n    [output node _____________________]\r\n    */\r\n\r\n    inputNode.connect(this.biquadFilter);\r\n\r\n    this.biquadFilter.connect(this.dryLevel);\r\n    this.biquadFilter.connect(this.wetLevel);\r\n\r\n    this.dryLevel.connect(outputNode);\r\n    this.wetLevel.connect(this.convolver);\r\n\r\n    this.convolver.connect(outputNode);\r\n\r\n\r\n    this.audioInput=inputNode;\r\n    this.audioOutput=outputNode;\r\n\r\n    this.biquadFilter.type = \"lowpass\";\r\n    this.biquadFilter.frequency.value = 300;\r\n\r\n    //most code of this function comes from http://middleearmedia.com/web-audio-api-convolver-node/\r\n    function getImpulse(impulseUrl) {\r\n      // let convolver = audioContext.createConvolver();\r\n      let ajaxRequest = new XMLHttpRequest();\r\n      ajaxRequest.open('GET', impulseUrl, true);\r\n      ajaxRequest.responseType = 'arraybuffer';\r\n      ajaxRequest.onload = function() {\r\n        let impulseData = ajaxRequest.response;\r\n        audioContext.decodeAudioData(impulseData, function(buffer) {\r\n          let myImpulseBuffer = buffer;\r\n          thisBlurModule.convolver.buffer = myImpulseBuffer;\r\n          thisBlurModule.convolver.loop = true;\r\n          thisBlurModule.convolver.normalize = true;\r\n        },\r\n        function(e){\"Error with decoding audio data\" + e.err});\r\n\r\n      }\r\n\r\n      ajaxRequest.send();\r\n    }\r\n    // getImpulse(\"audio/Batcave.wav\");\r\n    getImpulse(\"audio/TunnelToHell.wav\");\r\n  }\r\n  connect(audioInputNode){\r\n    this.audioOutput.connect(audioInputNode);\r\n  }\r\n  control(value){\r\n    let wet=value;\r\n    let filterCut=(1-value*value)*filterHighestCut+filterLowestCut;\r\n    console.log(filterCut);\r\n    this.biquadFilter.frequency.value=filterCut;\r\n    this.dryLevel.gain.value=1-wet;\r\n    this.wetLevel.gain.value=wet;\r\n  };\r\n}","var bm=require('./blurModule.js');\r\ndocument.addEventListener('DOMContentLoaded',function(){\r\n  console.log(\"init audio 3\");\r\n  var audioContext = new (window.AudioContext || window.webkitAudioContext)();\r\n  var output=audioContext.destination;\r\n  var looperModule=new (function(){\r\n    var source = audioContext.createBufferSource();\r\n    source.loop = true;\r\n    this.init=function() {\r\n      source = audioContext.createBufferSource();\r\n      var request = new XMLHttpRequest();\r\n\r\n      request.open('GET', 'audio/bb_140_alphafunki.wav', true);\r\n\r\n      request.responseType = 'arraybuffer';\r\n\r\n      request.onload = function() {\r\n        console.log(\"request\",request);\r\n        var audioData = request.response;\r\n\r\n        audioContext.decodeAudioData(audioData, function(buffer) {\r\n            var myBuffer = buffer;\r\n            source.buffer = myBuffer;\r\n            // source.connect(output);\r\n            source.start();\r\n            source.loop = true;\r\n          },\r\n\r\n          function(e){\"Error with decoding audio data\" + e.err});\r\n\r\n      }\r\n\r\n      request.send();\r\n    }\r\n    this.init();\r\n    this.connect=function(audioInputNode){\r\n      source.connect(audioInputNode);\r\n    }\r\n    return this;\r\n  })();\r\n\r\n  var module=new bm.BlurModule(audioContext);\r\n\r\n  looperModule.connect(module.audioInput);\r\n\r\n\r\n  module.connect(output);\r\n  let duck=document.createElement(\"img\");\r\n  duck.src=\"assets/duck.png\"\r\n  duck.style.position=\"absolute\";\r\n  document.body.appendChild(duck);\r\n  document.addEventListener('mousemove',function(e){\r\n    // console.log(document.width);\r\n    module.control(e.clientX/(window.innerWidth-5));\r\n    duck.style.left=e.clientX-200+\"px\";\r\n    duck.style.top=window.innerHeight-180+\"px\";\r\n  });\r\n\r\n});"]}